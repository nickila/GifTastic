<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>GifTastic!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <div id="button-div"></div>
    <button class="gif-button" data-gif="frog">FROGZ</button>
    <button class="gif-button" data-gif="pee-wee">PEE-WEE</button>
    <form id="gif-form">
        <label for="gif-input">Add a theme!</label>
        <input type="text" id="gif-input">
        <br>
        <input id="add-gif" type="submit" value="Add themes!">
    </form>
    <div id="gif-view"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        var gifArray = ["old cartoon", "fleischer cartoon", "toby the pup", "1930s cartoon", "1930s mickey mouse", "creepy old costumes", "old mickey mouse costume", "betty boop", "felix the cat", "koko the clown", "old popeye", "steamboat willie", "fleischer superman"];
        // Create a function that creates buttons of themes in the gifArray and display them in the #button-div
        var results;
        function showGif() {
            // Set for loop to loop through all the results that giphy sends us
            for (var i = 0; i < results.length; i++) {
                //var gifDiv = $("<div class='item'>");
                // Create an image tag to hold the gif
                var gifSpot = $("<img>");
                // Give the image tag a source attribute for animated (and for still)
                gifSpot.attr("src", results[i].images.fixed_height.url);
                // Prepend the images to #gif-view
                //gifDiv.prepend(gifSpot);
                $("#gif-view").prepend(gifSpot);
                console.log(results[0]);
            }
        }

        $("#add-gif").on("click", function (event) {
            console.log("success on adding gif");
            // Keeps screen from refreshing
            event.preventDefault();
            // Create variable gifInput equal to whatever user types in.
            var gifInput = $("#gif-input").val().trim();
            // Push the text input into gifArray
            gifArray.push(gifInput);
            // Run renderButtons function again to bring all buttons up with new button
            renderButtons();
            // Run showGif function to show gifs of the themes of the button clicked
            //showGif();
            // End function that allows user to type in theme and generate new button
        });
        // Create function to create buttons of themes in array
        function renderButtons() {
            // Empty #button-div every time so it doesn't repeat itself
            $("#button-div").empty();
            // Loop sets one button for each theme
            for (i = 0; i < gifArray.length; i++) {
                // Create a variable for a button
                var a = $("<button>");
                // Add a class of gif-button to the button
                a.addClass("gif-button");
                // Add an attribute of data-gif to the button as well
                a.attr("data-gif", gifArray[i]);
                // Add the words from the theme to the button
                a.text(gifArray[i]);
                // Append the button with all of its attributes and class and text to #button-div
                // This function will add a button for each theme in the gifArray. Later we will be
                // able to add more themes into the array and this same function should load the new
                // themes into this div and be functional.
                $("#button-div").append(a);
                // End the for loop
            }
            // End the renderButtons function
        }



        // Call renderButtons function
        renderButtons();
        // Create function that allows user to click the button with the gif theme (.gif-button) and show
        // gifs in a div 
        $(".gif-button").on("click", function () {
            console.log("you clicked a gif button!")
            // Create a div setting gif to whatever they click on 
            var gif = $(this).attr("data-gif");
            // GET gif info from giphy.com
            var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=" + gif + "&api_key=W1ZdQxBV7JvKqb1n70glDpBO3bo1h2T7&limit=10");
            xhr.done(function (response) {
                // create variable called results to equal the info from giphy with .data after it
                results = response.data;
                //var gifStill = data
                //var gifAnimated = data
                // Create function to show all the gifs that come to us.

                // Call function to showGif
                showGif();
            });
        });
        
        $(document).on("click", ".gif-btn", showGif);

    </script>

</body>

</html>