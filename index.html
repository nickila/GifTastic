<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>GifTastic!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <div id="button-div"></div>
    <button class="gif-button" data-gif="frog">FROGZ</button>
    <button class="gif-button" data-gif="pee-wee">PEE-WEE</button>
    <form id="gif-form">
        <label for="gif-input">Add a theme!</label>
        <input type="text" id="gif-input">
        <br>
        <input id="add-gif" type="submit" value="Add themes!">
    </form>
    <div id="gif-view"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        var gifArray = ["old cartoon", "fleischer cartoon", "toby the pup", "1930s cartoon", "1930s mickey mouse", "creepy old costumes", "old mickey mouse costume", "betty boop", "felix the cat", "koko the clown", "old popeye", "steamboat willie", "fleischer superman"];
        // Create a function that creates buttons of themes in the gifArray and display them in the #button-div
        $("#add-gif").on("click", function (event) {
                console.log("success on adding gif");
                // Keeps screen from refreshing
                event.preventDefault();
                // 
                var gifInput = $("#gif-input").val().trim();
                gifArray.push(gifInput);
                renderButtons();
                showGif();

            });
        
        function renderButtons() {
            // Empty #button-div every time so it doesn't repeat itself
            $("#button-div").empty();
            // Loop sets one button for each theme
            for (i = 0; i < gifArray.length; i++) {
                // Create a variable for a button
                var a = $("<button>");
                // Add a class of gif-button to the button
                a.addClass("gif-button");
                // Add an attribute of data-gif to the button as well
                a.attr("data-gif", gifArray[i]);
                // Add the words from the theme to the button
                a.text(gifArray[i]);
                // Append the button with all of its attributes and class and text to #button-div
                // This function will add a button for each theme in the gifArray. Later we will be
                // able to add more themes into the array and this same function should load the new
                // themes into this div and be functional.
                $("#button-div").append(a);
                // End the for loop
            }
            // End the renderButtons function
        }
        // Takes user input and pushes the theme into the array and calls the renderButtons function again
        // to create a new button with the new theme



        renderButtons();

        $(".gif-button").on("click", function () {
            console.log("you clicked a gif button!")
            var gif = $(this).attr("data-gif");

            var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=" + gif + "&api_key=W1ZdQxBV7JvKqb1n70glDpBO3bo1h2T7&limit=10");
            xhr.done(function (response) {
                var results = response.data;
                //var gifStill = data
                //var gifAnimated = data

                function showGif() {

                    for (var i = 0; i < results.length; i++) {
                        //var gifDiv = $("<div class='item'>");
                        var gifSpot = $("<img>");
                        gifSpot.attr("src", results[i].images.fixed_height.url);
                        //gifDiv.prepend(gifSpot);
                        $("#gif-view").prepend(gifSpot);
                        console.log(results[0]);
                    }
                }
                showGif();




            });

            








        });
        //$(document).on("click", ".gif-btn", renderButtons);

    </script>

</body>

</html>